import{r as s,j as o}from"./index-royto4hI.js";const C=({images:I=[],videos:l=[],projectId:f,autoplay:y=!0,autoplayDelay:b=5e3})=>{const i=[...I.map((e,t)=>({type:"image",src:`/static_assets/${e}`,alt:`Screenshot ${t+1}`,id:`image-${t}`})),...l.map((e,t)=>({type:"video",...e,id:`video-${t}-${f}`}))],r=i.length,[u,c]=s.useState(r>1?1:0),[v,g]=s.useState(y),[P,m]=s.useState(!0),[T,x]=s.useState(!1),p=s.useRef(null);s.useRef(null);const d=s.useRef({}),S=r>1?[{...i[r-1],id:`${i[r-1].id}-clone-start`},...i,{...i[0],id:`${i[0].id}-clone-end`}]:i,h=s.useCallback((e,t)=>{const n=e.data;n===1?g(!1):(n===0||n===2)&&g(y)},[y,g]);s.useEffect(()=>{if(l.length===0)return;(()=>{if(window.YT&&window.YT.Player){x(!0);return}if(!window.onYouTubeIframeAPIReady){window.onYouTubeIframeAPIReady=()=>{x(!0)};const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}})()},[l.length]),s.useEffect(()=>{if(!T||l.length===0)return;const t=setTimeout(()=>{l.forEach((n,R)=>{const a=`video-${R}-${f}`;if(document.getElementById(a)&&!d.current[a])try{d.current[a]=new window.YT.Player(a,{events:{onStateChange:w=>h(w,a)}})}catch{console.warn("YouTube player initialization delayed for:",a),setTimeout(()=>{if(document.getElementById(a)&&!d.current[a])try{d.current[a]=new window.YT.Player(a,{events:{onStateChange:w=>h(w,a)}})}catch{console.error("Failed to initialize YouTube player:",a)}},1e3)}})},500);return()=>clearTimeout(t)},[T,l,f,h]),s.useEffect(()=>(v&&r>1?p.current=setInterval(()=>{c(e=>e+1)},b):clearInterval(p.current),()=>clearInterval(p.current)),[v,r,b]),s.useEffect(()=>{r<=1||(u===0?setTimeout(()=>{m(!1),c(r),setTimeout(()=>m(!0),50)},600):u===r+1&&setTimeout(()=>{m(!1),c(1),setTimeout(()=>m(!0),50)},600))},[u,r]);const $=e=>{c(r>1?e+1:e)},j=()=>{c(e=>e-1)},N=()=>{c(e=>e+1)};if(s.useEffect(()=>{const e=d.current;return()=>{Object.values(e).forEach(t=>{try{t&&typeof t.destroy=="function"&&t.destroy()}catch{console.error("Error destroying YouTube player")}})}},[]),r===0)return null;const E=`project${f}-slider`;return o.jsxs("div",{className:E,children:[o.jsxs("div",{className:"relative overflow-hidden rounded-xl",children:[o.jsx("div",{className:`flex ${P?"transition-transform duration-600 ease-out":""}`,style:{transform:`translateX(-${u*100}%)`},children:S.map((e,t)=>o.jsx("div",{className:"w-full flex-shrink-0",children:e.type==="image"?o.jsx("img",{src:e.src,alt:e.alt,className:"rounded-xl w-full object-contain",style:{aspectRatio:"16/9"}}):o.jsx("div",{className:"video-container",style:{aspectRatio:"16/9"},children:o.jsx("iframe",{id:e.id,src:`https://www.youtube.com/embed/${e.videoId}?enablejsapi=1&origin=${encodeURIComponent(window.location.origin)}`,title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy",width:"100%",height:"100%",style:{borderRadius:"0.75rem"}})})},e.id))}),r>1&&o.jsxs("div",{className:"tns-controls",children:[o.jsx("button",{onClick:j,className:"tns-controls-prev","data-controls":"prev","aria-label":"Previous slide",children:"←"}),o.jsx("button",{onClick:N,className:"tns-controls-next","data-controls":"next","aria-label":"Next slide",children:"→"})]})]}),r>1&&o.jsx("div",{className:"tns-nav",children:i.map((e,t)=>{let n=u-1;return n<0&&(n=r-1),n>=r&&(n=0),o.jsx("button",{onClick:()=>$(t),className:`tns-nav-button ${t===n?"tns-nav-active":""}`,"aria-label":`Go to slide ${t+1}`},t)})})]})};export{C as I};
