import{r as n,j as o}from"./index-nI5-doEp.js";const B=({images:j=[],videos:l=[],projectId:P,appId:R,autoplay:h=!0,autoplayDelay:v=5e3})=>{const m=P??R,i=[...j.map((e,t)=>({type:"image",src:`/static_assets/${e}`,alt:`Screenshot ${t+1}`,id:`image-${t}`})),...l.map((e,t)=>({type:"video",...e,id:`video-${t}-${m}`}))],r=i.length,[u,c]=n.useState(r>1?1:0),[T,p]=n.useState(h),[$,y]=n.useState(!0),[x,I]=n.useState(!1),g=n.useRef(null);n.useRef(null);const d=n.useRef({}),S=r>1?[{...i[r-1],id:`${i[r-1].id}-clone-start`},...i,{...i[0],id:`${i[0].id}-clone-end`}]:i,w=n.useCallback((e,t)=>{const s=e.data;s===1?p(!1):(s===0||s===2)&&p(h)},[h,p]);n.useEffect(()=>{if(l.length===0)return;(()=>{if(window.YT&&window.YT.Player){I(!0);return}if(!window.onYouTubeIframeAPIReady){window.onYouTubeIframeAPIReady=()=>{I(!0)};const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}})()},[l.length]),n.useEffect(()=>{if(!x||l.length===0)return;const t=setTimeout(()=>{l.forEach((s,k)=>{const a=`video-${k}-${m}`;if(document.getElementById(a)&&!d.current[a])try{d.current[a]=new window.YT.Player(a,{events:{onStateChange:b=>w(b,a)}})}catch{console.warn("YouTube player initialization delayed for:",a),setTimeout(()=>{if(document.getElementById(a)&&!d.current[a])try{d.current[a]=new window.YT.Player(a,{events:{onStateChange:b=>w(b,a)}})}catch{console.error("Failed to initialize YouTube player:",a)}},1e3)}})},500);return()=>clearTimeout(t)},[x,l,m,w]),n.useEffect(()=>(T&&r>1?g.current=setInterval(()=>{c(e=>e+1)},v):clearInterval(g.current),()=>clearInterval(g.current)),[T,r,v]),n.useEffect(()=>{r<=1||(u===0?setTimeout(()=>{y(!1),c(r),setTimeout(()=>y(!0),50)},600):u===r+1&&setTimeout(()=>{y(!1),c(1),setTimeout(()=>y(!0),50)},600))},[u,r]);const N=e=>{c(r>1?e+1:e)},E=()=>{c(e=>e-1)},Y=()=>{c(e=>e+1)};if(n.useEffect(()=>{const e=d.current;return()=>{Object.values(e).forEach(t=>{try{t&&typeof t.destroy=="function"&&t.destroy()}catch{console.error("Error destroying YouTube player")}})}},[]),r===0)return null;const C=`slider-${m}`,f="12px";return o.jsxs("div",{className:C,children:[o.jsxs("div",{className:"relative overflow-hidden rounded-xl",children:[o.jsx("div",{className:`flex ${$?"transition-transform duration-600 ease-out":""}`,style:{transform:`translateX(-${u*100}%)`},children:S.map((e,t)=>o.jsx("div",{className:"w-full flex-shrink-0 flex justify-center",style:{borderRadius:f,overflow:"hidden"},children:e.type==="image"?o.jsx("img",{src:e.src,alt:e.alt,className:"block w-full h-auto",style:{borderRadius:f,clipPath:`inset(0 round ${f})`}}):o.jsx("div",{className:"video-container",style:{aspectRatio:"16/9",borderRadius:f,overflow:"hidden"},children:o.jsx("iframe",{id:e.id,src:`https://www.youtube.com/embed/${e.videoId}?enablejsapi=1&origin=${encodeURIComponent(window.location.origin)}`,title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,loading:"lazy",width:"100%",height:"100%",style:{borderRadius:f}})})},e.id))}),r>1&&o.jsxs("div",{className:"tns-controls",children:[o.jsx("button",{onClick:E,className:"tns-controls-prev","data-controls":"prev","aria-label":"Previous slide",children:"←"}),o.jsx("button",{onClick:Y,className:"tns-controls-next","data-controls":"next","aria-label":"Next slide",children:"→"})]})]}),r>1&&o.jsx("div",{className:"tns-nav",children:i.map((e,t)=>{let s=u-1;return s<0&&(s=r-1),s>=r&&(s=0),o.jsx("button",{onClick:()=>N(t),className:`tns-nav-button ${t===s?"tns-nav-active":""}`,"aria-label":`Go to slide ${t+1}`},t)})})]})};export{B as I};
